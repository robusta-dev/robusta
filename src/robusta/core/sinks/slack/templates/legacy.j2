{# Legacy template that mimics the original Slack message format from before templates #}
{# This template produces messages that look identical to pre-template Robusta #}

{# First create the status/header block - different format based on source #}
{
  "type": "section",
  "text": {
    "type": "mrkdwn",
    "text": "{% if finding.source == 'PROMETHEUS' %}{% if status_text == 'Firing' %}{{ status_emoji }} `Prometheus Alert Firing` {{ status_emoji }}{% else %}{{ status_emoji }} *Prometheus resolved*{% endif %}{% elif finding.source == 'KUBERNETES_API_SERVER' %}ðŸ‘€ *K8s event detected*{% else %}ðŸ‘€ *Notification*{% endif %} {{ severity_emoji }} *{{ severity }}*\n{% if platform_enabled and include_investigate_link %}<{{ investigate_uri }}|*{{ title }}*>{% else %}*{{ title }}*{% endif %}"
  }
}

{# Source block - old format used "Source" instead of "Cluster" #}
{
  "type": "section",
  "text": {
    "type": "mrkdwn",
    "text": "*Source:* `{{ cluster_name }}`"
  }
}

{# Description block if available - formatted based on source #}
{% if finding.description %}
{
  "type": "section",
  "text": {
    "type": "mrkdwn",
    "text": "{% if finding.source == 'PROMETHEUS' %}ðŸ”” *Alert:* {{ finding.description }}{% elif finding.source == 'KUBERNETES_API_SERVER' %}ðŸ‘€ *K8s event detected:* {{ finding.description }}{% else %}ðŸ‘€ *Notification:* {{ finding.description }}{% endif %}"
  }
}
{% endif %}