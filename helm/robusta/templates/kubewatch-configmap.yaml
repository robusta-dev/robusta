apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-kubewatch-config
  namespace: {{ .Release.Namespace }}
data:
  .kubewatch.yaml: |-
    handler:
      cloudevent:
        url: "http://{{ .Release.Name }}-runner:80/api/handle"
{{- if .Values.kubewatch.config.resource }}
{{ toYaml .Values.kubewatch.config | indent 4 }}
{{ else }}
{{ .Files.Get "kubewatch.yaml" | indent 4}}
{{- end }}